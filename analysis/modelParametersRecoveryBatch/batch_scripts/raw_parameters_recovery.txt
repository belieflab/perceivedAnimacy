i=1
####functions
source("../functions.R")
####import_data
simPars<-read.csv("../figures_tables/simPars.csv")
simTrials<-read.csv("../figures_tables/simTrials.csv")
randDist<-read.csv("../figures_tables/simRandDist.csv")
####participants_vector
simParticip<-unique(simPars$part)
####get_only_one_participant
simPars<-simPars[simPars$part==simParticip[i],]
####parameters_for_fitting_algorithm
fitPars<-list(mcRange=c(20,100),thetaRange=c(50,200),etaRange=c(0.55,0.95),binsSize=data.frame(mc=30,theta=30,eta=30))
####add_columns_which_be_filled_with_the_fitting_algorithm
simPars$negSumLog<-simPars$hitRate<-simPars$eta_fit_var<-simPars$theta_fit_var<-simPars$mc_fit_var<-simPars$eta_fit_wm<-simPars$theta_fit_wm<-simPars$mc_fit_wm<-NA
####get_start_time
start_time<-Sys.time()
####fit_one_participant
temp<-f_fitDetMod(randDist,simPars,fitPars,plotFigure=F,progress_bar=T)
####extract_fitted_parameters
simPars$negSumLog[simPars$part==simParticip[i]]<-temp$mle$negSumLog
simPars$hitRate[simPars$part==simParticip[i]]<-temp$mle$hitRate
simPars[simPars$part==simParticip[i],grepl("wm",colnames(simPars))]<-temp$pars$wMean
simPars[simPars$part==simParticip[i],grepl("var",colnames(simPars))]<-temp$pars$var
####get_end_time
end_time<-Sys.time()
####total_duration_time
total_time<-end_time-start_time
####add_total_time
simPars$total_time<-total_time
####print_fitted_parameters
write.csv(simPars,paste0("../figures_tables/simParsWithParRecovery_",i,".csv"),row.names=F)
